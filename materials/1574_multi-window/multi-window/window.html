<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Title</title>
    </head>
    <body>
        <ul id="messages"></ul>

        <script>
            const messages = document.querySelector('#messages');

            window.addEventListener('message', e => {
                console.log(e);

                if (e.data.__LOFTSCHOOL) {
                    addMessage(e.data.message);
                }
            });

            function addMessage(message) {
                const li = document.createElement('li');

                li.textContent = message;
                messages.appendChild(li);
            }

            if (opener) {
                opener.postMessage({
                    __LOFTSCHOOL: true,
                    ready: true
                }, '*');
            } else {
                parent.postMessage({
                    __LOFTSCHOOL: true,
                    ready: true
                }, '*');
            }
        </script>
    </body>
</html>
