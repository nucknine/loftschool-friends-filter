<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Title</title>
    </head>
    <body>
        <button id="openWindow">Открыть окно и создать iframe</button>

        <script>
            const openWindow = document.querySelector('#openWindow');

            window.addEventListener('message', e => {
                if (e.data.__LOFTSCHOOL) {
                    if (e.data.ready) {
                        e.source.postMessage({
                            __LOFTSCHOOL: true,
                            message: 'Привет'
                        }, '*');
                    }
                }
            });

            openWindow.addEventListener('click', () => {
                window.open('window.html', 'myWindow', 'width=300,height=300,top=200,left=200');

                const iframe = document.createElement('iframe');
                document.body.appendChild(iframe);
                iframe.src = 'window.html';
            });
        </script>
    </body>
</html>
